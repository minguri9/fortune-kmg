<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>ê¹€ë™ìš´ì„¸ ë³´ëŸ¬ ì˜¤ì„¸ìš”!</title>

    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background-color: #f3f4f6;
    min-height: 100vh;
    padding: 32px 16px;

    display: flex;
    justify-content: center;
    align-items: flex-start;
    opacity: 0;
    transform: translateY(25px);
    animation: slideUp 0.7s ease-out forwards;
}

/* ğŸ”¥ ë©”ì¸ ë°•ìŠ¤: íƒ€ë¡œ ë°•ìŠ¤ì™€ ë™ì¼í•œ í­ ë§ì¶”ê¸° */
.container {
    width: 100%;
    max-width:1080px;
    background:#ffffff;
    padding: 40px 40px; /* ë” ë„“ì€ ë¹„ìœ¨ì— ë§ê²Œ ì—¬ë°± ì¡°ì • */
    border-radius: 18px;
    box-shadow:0 16px 30px rgba(15,23,42,0.1);
    border:1px solid #e5e7eb;
    margin-top: 20px;
}


        /* ---------- íƒ­ ë©”ë‰´ ---------- */
        .tabs {
            display:flex;
            gap:10px;
            margin-bottom:20px;
        }

        .tab-btn {
            flex:1;
            padding:10px 0;
            border:none;
            cursor:pointer;
            border-radius:10px;
            background:#e5e7eb;
            font-weight:600;
            font-size:14px;
        }

        .tab-btn.active {
            background:#2563eb;
            color:white;

        }

        .tab-content {
        display:none;
        opacity: 0;
        transform: translateY(25px);
        animation: slideUp 0.7s ease-out forwards;}

        .tab-content.active { display:block;
        opacity: 0;
        transform: translateY(25px);
        animation: slideUp 0.7s ease-out forwards;}

        /* ê³µí†µ í¼ UI */
        label {
            display:block; font-size:13px; font-weight:500; margin-bottom:6px; color:#374151;
        }
        input[type="text"], input[type="date"] {
            width:100%; padding:10px 12px; margin-bottom:16px;
            border-radius:10px; background:#f9fafb;
            border:1px solid #d1d5db;
        }
        .submit-btn {
            width:100%; padding:12px;
            border:none; border-radius:999px;
            background: #ff9800;; color:white;
            font-size:14px; font-weight:600; cursor:pointer;
            margin-top:8px;
        }
        .submit-btn:hover { background:#1d4ed8; }

        /* íƒ€ë¡œ ë°•ìŠ¤ */
        .tarot-box {
            background:white;
            width : 100%;
            max-width:1080px;
            padding: 30px;
            border-radius:15px;
            box-shadow:0 8px 20px rgba(0,0,0,0.08);
            text-align:center;
            margin-top:10px;
            opacity: 0;
    transform: translateY(25px);
    animation: slideUp 0.7s ease-out forwards;
        }
        /* ê° ì¤„(row)ë¥¼ ìˆ˜í‰ ì •ë ¬ */
        .tarot-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px; /* ì¹´ë“œ ê°„ê²© */
    justify-content: center;
    margin-top: 20px;
    position: relative !important;
}

/* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
.tarot-card {
    width: 130px;
    height: 210px;
    background-image: url('/tarot/card-back.png');
    background-size: cover;
    background-position: center;
    border-radius: 12px;
    border: 3px solid transparent;
    cursor: pointer;
    outline: none;
    position: relative;
    background-color: transparent;

    transition:
        transform .15s ease,
        border-color .2s ease;
}

.tarot-card:hover {
    transform: scale(1.07);
    border-color: #b38a50;
}

/* hover ì‹œ Pick Me! í‘œì‹œ */
.tarot-card::after {
    content: "Pick Me!";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 24px;
    font-weight: bold;
    opacity: 0;
    transition: opacity .2s ease;
    text-shadow: 0px 0px 8px rgba(0,0,0,0.8);
}

.tarot-card:hover::after {
    opacity: 1;
}
        /* í¬ì¶˜ì¿ í‚¤ ì „ì²´ ë°•ìŠ¤ ì¤‘ì•™ ì •ë ¬ */
.cookie-box {
    display: flex;
    flex-direction: column;   /* ì„¸ë¡œ ì •ë ¬ */
    align-items: center;      /* ê°€ìš´ë° ì •ë ¬ */
    justify-content: center;
    margin-top: 20px;
    opacity: 0;
    transform: translateY(25px);
    animation: slideUp 0.7s ease-out forwards;
}

/* ì¿ í‚¤ ì´ë¯¸ì§€ */
.cookie-img {
    width: 200px;
    cursor: pointer;
    transition: transform .2s;
    margin-bottom: 12px;   /* ì´ë¯¸ì§€ ì•„ë˜ ì—¬ë°± */
}

/* ë²„íŠ¼ ì¤‘ì•™ ì •ë ¬ */
.cookie-btn, .cookie-again {
    padding: 10px 16px;
    border: none;
    background: #ff9800;
    color: white;
    border-radius: 8px;
    cursor: pointer;
    margin-top: 10px;
}

.cookie-btn:hover, .cookie-again:hover {
    background: #1d4ed8;
}

/* ê²°ê³¼ í…ìŠ¤íŠ¸ë„ ê°€ìš´ë° ì •ë ¬ */
#cookie-result {
    text-align: center;
    margin-top: 20px;
}
@keyframes shakeCookie {
    0% { transform: rotate(0deg); }
    20% { transform: rotate(-10deg); }
    40% { transform: rotate(10deg); }
    60% { transform: rotate(-8deg); }
    80% { transform: rotate(8deg); }
    100% { transform: rotate(0deg); }
}

/* ì• ë‹ˆë©”ì´ì…˜ í´ë˜ìŠ¤ */
.cookie-shake {
    animation: shakeCookie 0.5s ease-in-out;
}

@keyframes slideUp {
    0% {
        opacity: 0;
        transform: translateY(25px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}
        /* â­ ì¹´ë“œê°€ ëª¨ì´ëŠ” ì¤€ë¹„ ë‹¨ê³„ */
.tarot-container.prepare .tarot-card {
    position: absolute !important;
    top: 50%;
    left: 50%;
    opacity: 0;
    transform: translate(-50%, -50%) rotate(8deg);
}

/* â­ ì¹´ë“œê°€ í¼ì³ì ¸ì„œ í˜„ì¬ ë°°ì—´ë¡œ ë³´ì´ëŠ” ë‹¨ê³„ */
.tarot-container.spread .tarot-card {
    position: static !important;
    opacity: 1;
    transform: rotate(0deg);
    transition: all 0.9s ease;
}

    </style>
</head>
<body>

<div class="container">

    <!-- â­ íƒ­ ë©”ë‰´ -->
    <div class="tabs">
        <button class="tab-btn active" data-tab="today" onclick="openTab('today')">ì˜¤ëŠ˜ì˜ ìš´ì„¸</button>
        <button class="tab-btn" data-tab="tarot" onclick="openTab('tarot')">íƒ€ë¡œ</button>
        <button class="tab-btn" data-tab="ddiddi" onclick="openTab('ddiddi')">ë  ìš´ì„¸</button>
        <button class="tab-btn" data-tab="cookie" onclick="openTab('cookie')">í¬ì¶˜ì¿ í‚¤</button>

    </div>

    <!-- â­ ì˜¤ëŠ˜ì˜ ìš´ì„¸ íƒ­ -->
    <div class="tab-content active" id="today">
        <h1 style="font-size:24px; margin-bottom:10px; text-align : center;">ğŸ”® ì˜¤ëŠ˜ì˜ ìš´ì„¸</h1>
        <p style="font-size:14px; color:#444; margin-bottom:20px; text-align : center;">
            ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ë©´ ì˜¤ëŠ˜ì˜ ìš´ì„¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </p>

        <form action="/fortune" method="post" style="max-width:420px; margin:0 auto;">

            <!-- ì„±ë³„ -->
            <label>ì„±ë³„</label>
            <select name="gender" required
                    style="width:100%; padding:12px; border-radius:10px; border:1px solid #d1d5db; background:#f9fafb; margin-bottom:15px;">
                <option value="male">ë‚¨ì„±</option>
                <option value="female">ì—¬ì„±</option>
            </select>

            <!-- ì´ë¦„ -->
            <label>ì´ë¦„</label>
            <input type="text" name="userName" placeholder="ì´ë¦„ ì…ë ¥" required>


            <!-- ì–‘ë ¥ / ìŒë ¥ -->
            <label>ìƒë…„ì›”ì¼ ì¢…ë¥˜</label>
            <select name="calendarType" required
                    style="width:100%; padding:12px; border-radius:10px; border:1px solid #d1d5db; background:#f9fafb; margin-bottom:15px;">
                <option value="solar">ì–‘ë ¥</option>
                <option value="lunar">ìŒë ¥</option>
            </select>

            <!-- íƒœì–´ë‚œ ì‹œê°„ -->
            <label>íƒœì–´ë‚œ ì‹œê°„</label>
            <select name="bornTime" required
                    style="width:100%; padding:12px; border-radius:10px; border:1px solid #d1d5db; background:#f9fafb; margin-bottom:15px;">
                <option value="">ëª¨ë¦„</option>
                <option value="å­">å­ (23~01)</option>
                <option value="ä¸‘">ä¸‘ (01~03)</option>
                <option value="å¯…">å¯… (03~05)</option>
                <option value="å¯">å¯ (05~07)</option>
                <option value="è¾°">è¾° (07~09)</option>
                <option value="å·³">å·³ (09~11)</option>
                <option value="åˆ">åˆ (11~13)</option>
                <option value="æœª">æœª (13~15)</option>
                <option value="ç”³">ç”³ (15~17)</option>
                <option value="é…‰">é…‰ (17~19)</option>
                <option value="æˆŒ">æˆŒ (19~21)</option>
                <option value="äº¥">äº¥ (21~23)</option>
            </select>


            <!-- ìƒë…„ì›”ì¼ -->
            <label>ìƒë…„ì›”ì¼</label>
            <input type="date" id="birthDate" name="birthDate" required>

            <!-- ì œì¶œ -->
            <button type="submit" class="submit-btn">ìš´ì„¸ í™•ì¸í•˜ê¸°</button>
        </form>

    </div>


    <!-- â­ íƒ€ë¡œ íƒ­ (ìš”ì²­í•œ /tarot í™”ë©´ ê·¸ëŒ€ë¡œ í†µí•©) -->
    <div class="tab-content" id="tarot">
        <div class="tarot-box">
            <h1 style="font-size:24px; margin-bottom:10px;">ğŸƒ íƒ€ë¡œ ìš´ì„¸</h1>
            <p style="font-size:14px; color:#444; margin-bottom:20px;">
                ë§ˆìŒì„ ë¹„ìš°ê³  ì¹´ë“œë¥¼ ëˆŒëŸ¬ ì˜¤ëŠ˜ì˜ ë©”ì‹œì§€ë¥¼ ë°›ì•„ë³´ì„¸ìš”.
            </p>

            <!-- /tarot-result ë¡œ POST ë³´ë‚´ëŠ” ê²ƒ ê·¸ëŒ€ë¡œ ìœ ì§€ -->
            <form method="post" th:action="@{/tarot-go}">
                <div class="tarot-container">
                    <!-- ì´ 22ì¥ ë²„íŠ¼ -->
                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>

                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>

                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>

                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>
                    <button class="tarot-card"></button>
                </div>
            </form>

        </div>
    </div>

    <!-- â­ ë  ìš´ì„¸ íƒ­ -->
    <div class="tab-content" id="ddiddi">
        <h1 style="font-size:24px; margin-bottom:10px; text-align:center; margin-bottom:12px;">ğŸ§§ ë  ìš´ì„¸</h1>
        <p style="text-align:center; color:#444; margin-bottom:20px;">
            ë ë¥¼ ì„ íƒí•˜ë©´ ì˜¤ëŠ˜ì˜ ë  ìš´ì„¸ë¥¼ ì•Œë ¤ë“œë¦´ê²Œìš”!
        </p>

        <form action="/ddiddi" method="post" style="max-width:400px; margin:0 auto;">
            <label>ë‹¹ì‹ ì˜ ë ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</label>
            <select name="ddiddi" style="
            width:100%; padding:12px; border-radius:10px;
            border:1px solid #d1d5db; background:#f9fafb;">
                <option value="ì¥ë ">ğŸ­ ì¥ë </option>
                <option value="ì†Œë ">ğŸ® ì†Œë </option>
                <option value="í˜¸ë‘ì´ë ">ğŸ¯ í˜¸ë‘ì´ë </option>
                <option value="í† ë¼ë ">ğŸ° í† ë¼ë </option>
                <option value="ìš©ë ">ğŸ² ìš©ë </option>
                <option value="ë±€ë ">ğŸ ë±€ë </option>
                <option value="ë§ë ">ğŸ´ ë§ë </option>
                <option value="ì–‘ë ">ğŸ‘ ì–‘ë </option>
                <option value="ì›ìˆ­ì´ë ">ğŸµ ì›ìˆ­ì´ë </option>
                <option value="ë‹­ë ">ğŸ” ë‹­ë </option>
                <option value="ê°œë ">ğŸ¶ ê°œë </option>
                <option value="ë¼ì§€ë ">ğŸ· ë¼ì§€ë </option>
            </select>

            <button type="submit" class="submit-btn" style="margin-top:20px;">
                ë  ìš´ì„¸ í™•ì¸í•˜ê¸°
            </button>
        </form>
    </div>


    <div class="tab-content" id="cookie">
        <h1 style="font-size:24px; margin-bottom:10px; text-align:center;">ğŸ¥  í¬ì¶˜ì¿ í‚¤</h1>
        <p style="font-size:14px; color:#444; margin-bottom:20px; text-align:center;">
            ì¿ í‚¤ë¥¼ í´ë¦­í•´ì„œ ì˜¤ëŠ˜ì˜ ì§§ì€ ë©”ì‹œì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”.
        </p>

        <div class="cookie-box">
            <!-- ğŸ”¥ ì´ë¯¸ì§€ í´ë¦­ ê°€ëŠ¥ -->
            <img id="cookie-image" src="/cookie/cookie.png" class="cookie-img" style="cursor:pointer;">
        </div>
        <br><br>
        <h2 style="font-size:14px; color:#444; margin-bottom:20px; text-align:center;">ê³¼ì—° ì˜¤ëŠ˜ì˜ ë©”ì‹œì§€ëŠ”?!</h2>

        <div id="cookie-result" style="display:none; text-align:center; margin-top:20px;">
            <h3 id="cookie-text" style="margin-bottom:15px;"></h3>

            <!-- ğŸ”¥ ë‹¤ì‹œ ë½‘ê¸° ë²„íŠ¼ -->
            <button id="cookie-again" class="cookie-again">í•œë²ˆ ë”?!</button>
        </div>
    </div>


</div>
<script>

    function openTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

            document.querySelector('[data-tab="'+tab+'"]').classList.add('active');
            document.getElementById(tab).classList.add('active');

            if (tab === "tarot") {
    animateTarotCards();
}
        }
        document.getElementById("birthDate").addEventListener("input", function() {
    let value = this.value;  // yyyy-mm-dd í˜•íƒœ
    let parts = value.split("-");

    // ì—°ë„ëŠ” 4ìë¦¬ë§Œ í—ˆìš©
    if (parts[0] && parts[0].length > 4) {
        parts[0] = parts[0].substring(0, 4);
        this.value = parts.join("-");
        }
    });
        document.addEventListener("DOMContentLoaded", () => {
        document.body.classList.add("page-slide-up");
    });

    const cookieMessages = [
        "í–‰ìš´ì´ ê³§ ë‹¹ì‹ ì„ ì°¾ì•„ì˜µë‹ˆë‹¤.",
        "ì˜¤ëŠ˜ì€ ì˜ˆìƒ ëª»í•œ ê¸°íšŒê°€ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”.",
        "ì‘ì€ ì„ íƒì´ í° ë³€í™”ë¥¼ ë§Œë“­ë‹ˆë‹¤.",
        "ë‹¹ì‹ ì˜ ì§„ì‹¬ì€ ì „ë‹¬ë  ê²ƒì…ë‹ˆë‹¤.",
        "ìƒˆë¡œìš´ ë§Œë‚¨ì´ ê³§ ìˆì„ ê±°ì˜ˆìš”.",
        "ê±±ì •ì€ ì‚´ì§ ë’¤ë¡œ ë¯¸ë¤„ë‘ì„¸ìš”.",
        "ì˜¤ëŠ˜ì€ ì°¨ë¶„í•˜ê²Œ í–‰ë™í•˜ë©´ ì¢‹ì•„ìš”.",
        "í–‰ìš´ì´ ë‹¹ì‹ ì—ê²Œ ë¯¸ì†Œì§“ê³  ìˆì–´ìš”!",
        "ì›í–ˆë˜ ì¼ì´ ê³§ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤!",
        "ì˜¤ëŠ˜ì€ ë‹¹ì‹ ì˜ ë‚ ì…ë‹ˆë‹¤!"
    ];

    let isOpened = false;  // ğŸ”¥ ì¿ í‚¤ê°€ ì´ë¯¸ ì—´ë ¸ëŠ”ì§€ ìƒíƒœ ì €ì¥

    function openCookie() {

        if (isOpened) return;

    isOpened = true;

    const cookieImg = document.getElementById("cookie-image");

    // ğŸ”¥ 1) í”ë“¤ê¸° ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€
    cookieImg.classList.add("cookie-shake");

    // ğŸ”¥ 2) ì• ë‹ˆë©”ì´ì…˜ ëë‚œ ë’¤ í´ë˜ìŠ¤ ìë™ ì œê±°
    setTimeout(() => {
        cookieImg.classList.remove("cookie-shake");
    }, 500);

    // ë©”ì‹œì§€ ëœë¤ ì„ íƒ
    const msg = cookieMessages[Math.floor(Math.random() * cookieMessages.length)];
    cookieImg.src = "/cookie/cookie-open.png";

    document.getElementById("cookie-text").textContent = msg;
    document.getElementById("cookie-result").style.display = "block";
    }

    function resetCookie() {
        isOpened = false; // ğŸ”¥ ë‹¤ì‹œ ì¿ í‚¤ ì—´ ìˆ˜ ìˆê²Œ ì´ˆê¸°í™”
        document.getElementById("cookie-image").src = "/cookie/cookie.png";
        document.getElementById("cookie-result").style.display = "none";
    }

    // ğŸ”¥ ì´ë¯¸ì§€ í´ë¦­ â†’ ì—´ê¸°
    document.getElementById("cookie-image").addEventListener("click", openCookie);
    // ğŸ”¥ ë‹¤ì‹œ ë½‘ê¸° â†’ ì›ìƒë³µêµ¬
    document.getElementById("cookie-again").addEventListener("click", resetCookie);


    // â­ íƒ€ë¡œ ì¹´ë“œ ëª¨ì˜€ë‹¤ê°€ ì •ë ¬ë˜ëŠ” ì• ë‹ˆë©”ì´ì…˜
function animateTarotCards() {
    const container = document.querySelector(".tarot-container");
    if (!container) return;

    container.classList.remove("prepare", "spread");

    // â­ ê°•ì œ ë¦¬í”Œë¡œìš° (ì´ê²Œ ìˆì–´ì•¼ 'ëª¨ì´ëŠ”' ì¥ë©´ì´ ë³´ì„!!)
    void container.offsetWidth;

    // 1ë‹¨ê³„: ì¹´ë“œ ì¤‘ì•™ ëª¨ì´ê¸°
    container.classList.add("prepare");

    // 2ë‹¨ê³„: í¼ì¹˜ê¸° (1ì´ˆ ë’¤)
    setTimeout(() => {
        container.classList.add("spread");
    }, 900);
}


</script>

</body>
</html>
